<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Javascript: AJAX: Call API</title>
		<script>
			document.addEventListener('DOMContentLoaded', () => {
				const list = document.getElementById('list');
				const listItems = [];

				// 1. fetch("url", "Method")
				// 1.1. URL = url with data
				// 1.2. Method = is only used when we are not working with the method = GET

				// 2. fetch deals with Promises (then())
				// Promises allows the frontend to continue to run while the data is being processed

				// 3. then(response => response.json())
				// While the rest of the website keeps running converts the respost to JSON format

				// 4.
				console.log(fetch('https://jsonplaceholder.typicode.com/users'));

				// Fetch Data with Normal Functions
				fetch('https://jsonplaceholder.typicode.com/users')
					.then(function (response) {
						console.log(response);
						return response.json();
					})
					.then(function (result) {
						console.log(result);
						createList(result);
					});

				function createList(result) {
					for (let i = 0; i < result.length; i++) {
						list.appendChild(document.createElement('li')).textContent = result[i].name;
					}
				}

				// Fetch Data with Arrow Functions
				// fetch('https://jsonplaceholder.typicode.com/users')
				// 	.then(response => response.json())
				// 	.then(result => console.log(result));
			});
		</script>
		<style></style>
	</head>
	<body>
		<main>
			<h1>Users list</h1>
			<ul id="list"></ul>
		</main>
	</body>
</html>
